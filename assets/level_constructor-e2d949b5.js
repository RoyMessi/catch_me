import{L as t,b as i,C as B,B as C}from"./game-3f92dc05.js";const f={START:"start",MIDDLE:"middle",END:"end",RANDOM:"random"},O={BLOCK_AROUND:"block_around",NULL:"null"},u=(()=>{function e(o){let r={};for(let L=0;L<o.ROWS;L++)L===0||L===o.ROWS-1?r[L]=[...Array(o.COLUMNS).keys()]:r[L]=[0,o.COLUMNS-1];return r}function c(o){var L;let r=((L=o.BLOCKS)==null?void 0:L.custom)??{};o.blockType===O.BLOCK_AROUND?(o.blockType=O.BLOCK_AROUND,o.BLOCKS=e({ROWS:o.ROWS,COLUMNS:o.COLUMNS})):o.BLOCKS=[],Object.keys(r).forEach(a=>{o.BLOCKS[a]||(o.BLOCKS[a]=[]),o.BLOCKS[a].push(...r[a])})}function l(o){o!=null&&o.UNBLOCK&&Object.keys(o==null?void 0:o.UNBLOCK).forEach(r=>{o.BLOCKS[r]&&(o.BLOCKS[r]=o.BLOCKS[r].filter(L=>!o.UNBLOCK[r].includes(L)))})}return{addBlocks:c,removeBlocks:l}})();function p(e){var o;let c=Object.create(C),l=Object.assign(c,e);return l.blockType=((o=e==null?void 0:e.BLOCKS)==null?void 0:o.type)??O.BLOCK_AROUND,u.addBlocks(l),u.removeBlocks(l),l}function y(e,c){return Array.from({length:c-e+1},(o,r)=>e+r*1)}function m(e){return e=e||{},this.levelSettings={type:(e==null?void 0:e.type)??t.EASY,boardSettings:p(e==null?void 0:e.board),collectables:[],enemies:[],player:null},this.getLocationAxis=function(c,l){const o=this.levelSettings.boardSettings.blockType===O.BLOCK_AROUND,r=o?1:0,L=this.levelSettings.boardSettings[c],a=o?L-2:L-1;if(typeof l=="string"){if(l===f.START)return r;if(l===f.MIDDLE)return Math.floor(a/2);if(l===f.END)return a}else if(typeof l=="number")return l<0&&Math.abs(l)<=a?a+l:l<a?l:a;return r},this.itemData=function(c){var l,o;return c.location?(c.location.column=this.getLocationAxis("COLUMNS",(l=c.location)==null?void 0:l.column),c.location.row=this.getLocationAxis("ROWS",(o=c.location)==null?void 0:o.row)):c.location={row:0,column:0},c},e.collectables&&(this.levelSettings.collectables=e.collectables.map(c=>{let l=this.itemData(c);return typeof l.type>"u"?l.subType=i.REGULAR:l.subType=l.type,{...B[l.subType],...l}})),e.enemies&&(this.levelSettings.enemies=e.enemies.map(c=>this.itemData(c))),e.player&&(this.levelSettings.player=this.itemData(e.player)),this.levelSettings}export{O as B,m as L,f as P,y as c};
